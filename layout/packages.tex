% General

\usepackage[utf8]{inputenc}
\usepackage{geometry}
\usepackage{csquotes}
\usepackage{graphicx}
\usepackage{listings}
\usepackage[svgnames]{xcolor}
\usepackage{comment}
\usepackage{setspace}
\usepackage{appendix}
\usepackage{lipsum}     %testo di prova (si può cancellare una volta iniziato a scrivere)
\usepackage{lineno}
\linenumbers

%\usepackage[9-15]{pagesel}
% attenzione: la filigrana in prima pagina ha opacità massima con questa opzione attivata
% non mettendo la prima pagina comunque appare draft in background

% Math
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{physics}
\usepackage{braket}
\usepackage{mathpartir}

% Front page
\usepackage{frontespizio}
\usepackage{tikz}
\usepackage[pages=some]{background}

% Code
\usepackage{alltt}
\usepackage{listings}
\lstset{
    basicstyle=\ttfamily,  % Same font as alltt
    columns=fullflexible,  % Match spacing of alltt
    keepspaces=true        % Preserve spaces like alltt
}

\lstdefinestyle{C}{
    language=C,
    tabsize=4,
    keywordstyle=\color{blue},              % Keywords in blue
    commentstyle=\color{green!50!black},    % Comments in green
    stringstyle=\color{orange},             % Strings in orange
    showstringspaces=false,
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    % frame=single,
    breaklines=true
}

\definecolor{coqblue}{RGB}{0,0,180}
\definecolor{coqgreen}{RGB}{0,120,0}
\definecolor{coqred}{RGB}{180,0,0}
\definecolor{coqpurple}{RGB}{120,0,120}

\lstdefinelanguage{Coq}{
    morekeywords=[1]{Definition, Inductive, CoInductive, Class, Instance, Fixpoint, CoFixpoint, Function},
    morekeywords=[2]{forall, exists, match, with, end, if, then, else, let, in, fix, fun},
    morekeywords=[3]{Prop, Type, Set, True, False, nat, bool, option, list},
    sensitive=true,
    morecomment=[l]{(*},
    morecomment=[s]{(*}{*)},
    morestring=[b]",
}

\lstdefinestyle{Coq}{
    language=Coq,
    keywordstyle=[1]\color{coqblue},
    keywordstyle=[2]\color{coqpurple},
    keywordstyle=[3]\color{coqred},
    tabsize=2,
    commentstyle=\color{green!50!black}\itshape,
    stringstyle=\color{orange},
    showstringspaces=false,
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    % frame=single,
    breaklines=true
}

% OCaml language with keyword groups
\lstdefinelanguage{OCaml}{
  sensitive=true,
  morecomment=[s]{(*}{*)},
  morestring=[b]",
  morestring=[d]',
  morekeywords=[1]{
    let, rec, and, val, type, module, struct, sig, class, object, method,
    inherit, virtual, functor, include, open, external, exception
  },
  morekeywords=[2]{
    if, then, else, match, with, try, when, for, to, downto, while, do, done,
    begin, end, fun, function
  },
  morekeywords=[3]{true, false},
  morekeywords=[4]{in, of, mutable, private, new, lazy, as, assert}
}

\lstdefinestyle{OCaml}{
    language=OCaml,
    keywordstyle=[1]\color{blue}\bfseries,    % Declarations
    keywordstyle=[2]\color{purple}\bfseries,  % Control flow
    keywordstyle=[3]\color{orange}\bfseries,  % Constants
    keywordstyle=[4]\color{teal}\bfseries,    % Misc keywords
    tabsize=2,
    basicstyle=\ttfamily\small,
    commentstyle=\color{green!50!black}\itshape,
    stringstyle=\color{red},
    showstringspaces=false,
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    % frame=single,
    breaklines=true,
}

% Page header
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE]{\leftmark}
\fancyhead[RO]{\rightmark}
\fancyfoot[LE,RO]{\thepage}


% Bibliography
\usepackage[style=numeric]{biblatex}
\addbibresource{biblio.bib}

% Abstract
\newenvironment{abstract}%
    {\cleardoublepage%
        \thispagestyle{empty}%
        \null \vfill\begin{center}%
            \bfseries \abstractname \end{center}}%
        {\vfill\null}

% Index
\usepackage{imakeidx}
\makeindex

% Symbols and notations
\usepackage{nomencl}
\makenomenclature

% To load as last packages to avoid problems
\usepackage{cleveref}
\usepackage{glossaries}
\makeglossaries
\newglossaryentry{set}{name={set},description={a collection of objects}}
\newglossaryentry{due}{name={second},description={second example}}
\newglossaryentry{emptyset}{name={\ensuremath{\emptyset}},description={the empty set}}
\longnewglossaryentry{fishage}{name={Fish Age}}{
    A common name for the Devonian geologic period spanning from the end of the Silurian Period to the beginning of the Carboniferous Period.
    
    This age was known for its remarkable variety of fish species.
}
\newglossaryentry{elite}{name={{é}lite},description={select group or class}}

\usepackage{graphicx} % Required for inserting images
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
% \usepackage[italian]{babel}
\usepackage{amsmath}
\usepackage{dsfont}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{array}
\usepackage{physics}
% \usepackage[table]{xcolor} %caricalo prima del nicematrix
\usepackage{nicematrix}
\newcolumntype{S}[1]{>{\raggedright\arraybackslash}m{#1}}
\newcolumntype{D}[1]{>{\raggedleft\arraybackslash}m{#1}}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}
\usepackage[all]{xy}
\newcolumntype{L}{>{$}l<{$}}
\newcolumntype{C}{>{$}c<{$}}
\newcolumntype{R}{>{$}r<{$}}
\usepackage{csquotes}
\usepackage[style=numeric]{biblatex}
\addbibresource{bibliografia.bib}
\renewcommand{\arraystretch}{2}
\usepackage{bbm}
\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator*{\argmin}{argmin}
\newcommand{\prob}[1]{\mathbb{P} \left( #1 \right )}
\newcommand{\E}[1]{\mathbb{E} \left[ #1 \right]}
\newcommand{\EC}[2]{\mathbb{E} \left[ #1 | #2\right]}
\newcommand{\betaold}{\beta^{\text{old}}}
\newcommand{\sigmamat}{\mathbf{\Sigma}}
\usepackage{todonotes}
\usepackage{imakeidx}
\usepackage{subcaption}
\usetikzlibrary{arrows.meta, positioning}
\setlength{\parindent}{0pt}

\makeindex